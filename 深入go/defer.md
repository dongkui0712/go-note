# defer

defer是在return之前执行的。这个在 官方文档中是明确说明了的。

要使用defer时不踩坑，最重要的一点就是要明白，return xxx这一条语句并不是一条原子指令!


## 函数返回的过程是这样的：
- 先给返回值赋值，
- 然后调用defer表达式，
- 最后才是返回到调用函数中。

**defer表达式可能会在设置函数返回值之后，在返回到调用函数之前，修改返回值，使最终的函数返回值与你想象的不一致。**